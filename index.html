<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nx Eran - Earn Money Watching Ads</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://ad.gigapub.tech/script?id=1476"></script>
    <script src='//libtl.com/sdk.js' data-zone='9388728' data-sdk='show_9388728'></script>
    <!-- OnClick Ads Script -->
    <script src="https://js.onclckmn.com/static/onclicka.js"></script>
    <!-- Adexium Ads Script -->
    <script type="text/javascript" src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>
    <style>
        :root {
            --primary: #FF7A00;
            --secondary: #FF2D87;
            --accent: #7B2EFF;
            --light: #f8f9fa;
            --dark: #1a1a2e;
            --success: #28a745;
            --danger: #dc3545;
            --gray: #6c757d;
            --bg-gradient: linear-gradient(135deg, #FF7A00 0%, #FF2D87 50%, #7B2EFF 75%, #2B6BFF 100%);
            --loading-gradient: linear-gradient(135deg, #FF7A00, #FF2D87, #7B2EFF, #2B6BFF);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: #333;
            line-height: 1.6;
        }
        
        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .circular-loader {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--loading-gradient);
            animation: rotate 1.2s linear infinite;
            position: relative;
            margin-bottom: 20px;
        }
        
        .circular-loader:before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: white;
            border-radius: 50%;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .container {
            max-width: 480px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow-x: hidden;
            padding-bottom: 70px;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        
        .header {
            background: var(--bg-gradient);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.15);
            padding: 12px;
            border-radius: 12px;
            margin-top: 15px;
            backdrop-filter: blur(10px);
        }
        
        .user-details {
            display: flex;
            align-items: center;
        }
        
        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            margin-right: 12px;
            overflow: hidden;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-text h3 {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .verify-badge {
            color: var(--accent);
            font-size: 14px;
        }
        
        .balance-card {
            background: white;
            color: var(--dark);
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .balance-title {
            font-size: 14px;
            color: var(--gray);
        }
        
        .balance-amount {
            font-size: 28px;
            font-weight: bold;
            margin: 5px 0;
            color: var(--primary);
        }
        
        .balance-subtext {
            font-size: 12px;
            color: var(--gray);
        }
        
        .nav-tabs {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: white;
            border-top: 1px solid #eee;
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 480px;
            z-index: 100;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .nav-item {
            text-align: center;
            padding: 5px 0;
            width: 20%;
            cursor: pointer;
            transition: all 0.3s;
            border-top: 3px solid transparent;
        }
        
        .nav-item.active {
            border-top: 3px solid var(--primary);
            color: var(--primary);
        }
        
        .nav-item i {
            font-size: 18px;
            margin-bottom: 3px;
        }
        
        .nav-item span {
            font-size: 11px;
        }
        
        .content {
            padding: 20px;
            padding-bottom: 10px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .progress-container {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--bg-gradient);
            border-radius: 4px;
        }
        
        .task-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--bg-gradient);
            color: white;
        }
        
        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #f8f9fa;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 122, 0, 0.1);
        }
        
        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .transaction-details {
            flex: 1;
        }
        
        .transaction-title {
            font-weight: 600;
        }
        
        .transaction-date {
            font-size: 12px;
            color: var(--gray);
        }
        
        .transaction-amount {
            font-weight: 600;
            color: var(--success);
        }
        
        .transaction-amount.withdrawal {
            color: var(--danger);
        }
        
        .withdraw-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        .withdraw-option i {
            font-size: 24px;
            margin-right: 15px;
            color: var(--primary);
        }
        
        .referral-code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
        }
        
        .code {
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 2px;
            color: var(--primary);
            margin: 10px 0;
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        
        .rank {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-size: 14px;
        }
        
        .rank-1 {
            background: var(--primary);
            color: white;
        }
        
        .rank-2 {
            background: var(--secondary);
            color: white;
        }
        
        .rank-3 {
            background: var(--accent);
            color: white;
        }
        
        .leaderboard-user {
            flex: 1;
        }
        
        .leaderboard-amount {
            font-weight: bold;
            color: var(--primary);
        }
        
        .footer {
            background: white;
            padding: 15px;
            text-align: center;
            border-top: 1px solid #eee;
            font-size: 12px;
            color: var(--gray);
        }
        
        .ad-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 20px 0;
        }
        
        .ad-placeholder {
            width: 100%;
            height: 250px;
            background: #e9ecef;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-weight: 600;
            flex-direction: column;
        }
        
        .ad-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            padding: 20px;
            position: relative;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .withdraw-info {
            font-size: 12px;
            color: var(--gray);
            text-align: center;
            margin: 10px 0;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 20px;
            cursor: pointer;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--gray);
        }
        
        .ad-rules {
            background: #fff4e5;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 13px;
        }
        
        .ad-rules ul {
            padding-left: 20px;
            margin: 10px 0;
            line-height: 1.5;
        }
        
        .ad-rules li {
            margin-bottom: 5px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
        }
        
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .user-id {
            font-size: 12px;
            color: var(--gray);
            margin-top: 5px;
        }
        
        .empty-state {
            text-align: center;
            padding: 20px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .waiting-text {
            font-size: 16px;
            color: var(--primary);
            font-weight: bold;
            margin-top: 15px;
        }
        
        .company-info {
            text-align: center;
            padding: 10px;
            font-size: 12px;
            color: var(--gray);
            border-top: 1px solid #eee;
            margin-top: 20px;
        }
        
        .company-info a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .provider-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .provider-stat {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .provider-stat h4 {
            margin-bottom: 5px;
            color: var(--primary);
        }
        
        .provider-stat p {
            font-size: 14px;
            color: var(--gray);
        }
        
        .provider-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="circular-loader"></div>
        <div class="loading-text">Nx Eran V2</div>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="logo">Nx Eran</div>
            <div class="user-info">
                <div class="user-details">
                    <div class="avatar">
                        <img src="https://via.placeholder.com/50?text=U" alt="Profile" id="userAvatar">
                    </div>
                    <div class="user-text">
                        <h3 id="userName">User <span class="verify-badge"><i class="fas fa-badge-check"></i></span></h3>
                        <p id="userUsername">@username</p>
                        <div class="user-id">ID: <span id="userId">Loading...</span></div>
                    </div>
                </div>
            </div>
            <div class="balance-card">
                <div class="balance-title">Total Balance</div>
                <div class="balance-amount">à§³ <span id="userBalance">0.00</span></div>
                <div class="balance-subtext">â‰ˆ $<span id="userBalanceUSD">0.00</span></div>
            </div>
        </div>
        
        <div class="content">
            <!-- Home Section -->
            <div class="section active" id="home">
                <div class="card">
                    <div class="card-title">
                        <span>Your Progress</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="task-stats">
                        <span>Completed: <span id="completedAds">0</span>/100 ads today</span>
                        <span>Remaining: <span id="remainingAds">100</span> ads</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Quick Actions</span>
                    </div>
                    <button class="btn btn-primary" onclick="showAdOptions()">
                        <i class="fas fa-play-circle"></i> Watch Ads & Earn
                    </button>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Recent Transactions</span>
                        <span style="font-size: 12px;"><a href="#" onclick="showSection('wallet')">View All</a></span>
                    </div>
                    <div id="recentTransactions">
                        <div class="empty-state">
                            <i class="fas fa-receipt"></i>
                            <p>No transactions yet</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tasks Section -->
            <div class="section" id="tasks">
                <div class="card">
                    <div class="card-title">
                        <span>Available Tasks</span>
                    </div>
                    <p>Watch ads and complete tasks to earn money. You must watch the entire ad to receive credit.</p>
                    
                    <div class="ad-rules">
                        <strong>Important Rules:</strong>
                        <ul>
                            <li>You will earn à§³0.1 for each completed ad</li>
                            <li>You can watch up to 25 ads per provider per day</li>
                            <li>If the ad doesn't load properly, you won't get paid</li>
                            <li>If you close the ad before completion, you won't get paid</li>
                        </ul>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value"><span id="todayAds">0</span>/100</div>
                            <div class="stat-label">Ads Today</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">à§³<span id="todayEarnings">0.00</span></div>
                            <div class="stat-label">Earned Today</div>
                        </div>
                    </div>
                    
                    <div class="provider-stats-grid">
                        <div class="provider-stat">
                            <h4>GigaPub Ads</h4>
                            <p><span id="gigapubCount">0</span>/25 today</p>
                        </div>
                        <div class="provider-stat">
                            <h4>Monetag Ads</h4>
                            <p><span id="monetagCount">0</span>/25 today</p>
                        </div>
                        <div class="provider-stat">
                            <h4>OnClick Ads</h4>
                            <p><span id="onclickCount">0</span>/25 today</p>
                        </div>
                        <div class="provider-stat">
                            <h4>Adexium Ads</h4>
                            <p><span id="adexiumCount">0</span>/25 today</p>
                        </div>
                    </div>
                    
                    <div class="ad-container">
                        <h3>Choose an ad provider to earn à§³0.1</h3>
                        <div class="ad-placeholder" id="adPlaceholder">
                            Select an ad provider to begin
                        </div>
                        <div class="ad-options">
                            <button class="btn btn-primary" onclick="showAd('gigapub')" id="gigaBtn">
                                <i class="fas fa-play"></i> GigaPub Ads
                            </button>
                            <button class="btn btn-secondary" onclick="showAd('monetag')" id="monetagBtn">
                                <i class="fas fa-play"></i> Monetag Ads
                            </button>
                            <button class="btn btn-primary" onclick="showAd('onclick')" id="onclickBtn">
                                <i class="fas fa-play"></i> OnClick Ads
                            </button>
                            <button class="btn btn-secondary" onclick="showAd('adexium')" id="adexiumBtn">
                                <i class="fas fa-play"></i> Adexium Ads
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Task History</span>
                    </div>
                    <div id="taskHistory">
                        <div class="empty-state">
                            <i class="fas fa-tasks"></i>
                            <p>No task history yet</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Wallet Section -->
            <div class="section" id="wallet">
                <div class="card">
                    <div class="card-title">
                        <span>Withdraw Earnings</span>
                    </div>
                    
                    <div class="withdraw-option" onclick="showWithdrawModal('bkash')">
                        <i class="fas fa-mobile-alt"></i>
                        <div>
                            <h3>Bkash</h3>
                            <p>Min: à§³20</p>
                        </div>
                    </div>
                    
                    <div class="withdraw-option" onclick="showWithdrawModal('rocket')">
                        <i class="fas fa-university"></i>
                        <div>
                            <h3>Rocket</h3>
                            <p>Min: à§³20</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Transaction History</span>
                    </div>
                    <div id="transactionHistory">
                        <div class="empty-state">
                            <i class="fas fa-receipt"></i>
                            <p>No transaction history yet</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Refer Section -->
            <div class="section" id="refer">
                <div class="card">
                    <div class="card-title">
                        <span>Invite Friends & Earn</span>
                    </div>
                    <p>Invite your friends to join Nx Eran using your referral link. You'll earn <b>10%</b> of their earnings!</p>
                    
                    <div class="referral-code">
                        <p>Your Referral Link</p>
                        <div class="code" id="referralLink">https://t.me/NxEranBot?start=ref123456</div>
                        <button class="btn btn-primary" onclick="copyReferralLink()">
                            <i class="fas fa-copy"></i> Copy Link
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Referral Stats</span>
                    </div>
                    <div style="display: flex; justify-content: space-around; text-align: center; padding: 15px 0;">
                        <div>
                            <h3 id="referredCount">0</h3>
                            <p style="color: var(--gray);">Referred</p>
                        </div>
                        <div>
                            <h3 id="activeReferrals">0</h3>
                            <p style="color: var(--gray);">Active</p>
                        </div>
                        <div>
                            <h3>à§³ <span id="referralEarnings">0.00</span></h3>
                            <p style="color: var(--gray);">Earned</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Your Referrals</span>
                    </div>
                    <div id="referralsList">
                        <div class="empty-state">
                            <i class="fas fa-users"></i>
                            <p>No referrals yet</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Leaderboard Section -->
            <div class="section" id="leaderboard">
                <div class="card">
                    <div class="card-title">
                        <span>Top Earners This Week</span>
                    </div>
                    <div id="leaderboardList">
                        <div class="empty-state">
                            <i class="fas fa-trophy"></i>
                            <p>No leaderboard data yet</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">
                        <span>Your Ranking</span>
                    </div>
                    <div style="text-align: center; padding: 20px;">
                        <h2 style="font-size: 48px; color: var(--primary);">#<span id="userRank">-</span></h2>
                        <p>Start watching ads to join the leaderboard!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="nav-tabs">
            <div class="nav-item active" data-target="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" data-target="tasks">
                <i class="fas fa-tasks"></i>
                <span>Tasks</span>
            </div>
            <div class="nav-item" data-target="wallet">
                <i class="fas fa-wallet"></i>
                <span>Wallet</span>
            </div>
            <div class="nav-item" data-target="refer">
                <i class="fas fa-users"></i>
                <span>Refer</span>
            </div>
            <div class="nav-item" data-target="leaderboard">
                <i class="fas fa-trophy"></i>
                <span>Leaderboard</span>
            </div>
        </div>
        
        <div class="footer">
            <p>Nx Eran &copy; 2025 - Earn by Nxona</p>
        </div>
        
        <div class="company-info">
            Powered by <a href="https://nxona.online" target="_blank">Nxona LLC</a> | UI Version: V2
        </div>
    </div>
    
    <!-- Ad Options Modal -->
    <div class="modal" id="adOptionsModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-title">Choose Ad Provider</div>
            
            <p style="text-align: center; margin-bottom: 20px;">Select which ad provider you want to watch ads from</p>
            
            <div class="ad-options" style="grid-template-columns: 1fr;">
                <button class="btn btn-primary" onclick="closeModal(); showAd('gigapub')">
                    <i class="fas fa-play"></i> GigaPub Ads
                </button>
                <button class="btn btn-secondary" onclick="closeModal(); showAd('monetag')">
                    <i class="fas fa-play"></i> Monetag Ads
                </button>
                <button class="btn btn-primary" onclick="closeModal(); showAd('onclick')">
                    <i class="fas fa-play"></i> OnClick Ads
                </button>
                <button class="btn btn-secondary" onclick="closeModal(); showAd('adexium')">
                    <i class="fas fa-play"></i> Adexium Ads
                </button>
            </div>
        </div>
    </div>
    
    <!-- Withdraw Modal -->
    <div class="modal" id="withdrawModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div class="modal-title" id="modalTitle">Withdraw to Bkash</div>
            
            <div class="withdraw-info">
                <p id="minAmount">Minimum withdrawal: à§³20</p>
            </div>
            
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" placeholder="Enter your full name">
            </div>
            
            <div class="form-group">
                <label id="numberLabel" for="number">Bkash Number</label>
                <input type="text" id="number" placeholder="Enter your number">
            </div>
            
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" placeholder="Enter your email">
            </div>
            
            <div class="form-group">
                <label for="amount">Amount</label>
                <input type="number" id="amount" placeholder="Enter amount">
            </div>
            
            <button class="btn btn-primary" onclick="submitWithdraw()">Submit Request</button>
        </div>
    </div>
    
    <div class="notification" id="notification">
        Withdrawal request sent to admin successfully!
    </div>
    
    <script>
        // Bot configuration
        const BOT_API_KEY = '8002896346:AAEudGtjpNfudbTElW_n2M_hrMBzj2JvvpY';
        const ADMIN_ID = '7580544870';
        
        // Global variables
        let currentUserId = null;
        let currentUserData = null;
        let currentAdProvider = null;
        let adexiumWidget = null;
        
        // Initialize user data with localStorage
        function initUserData(userId) {
            currentUserId = userId;
            
            // Check if user data exists in localStorage
            const userDataKey = `userData_${userId}`;
            if (!localStorage.getItem(userDataKey)) {
                // Initialize with default data for this user
                currentUserData = {
                    balance: 0,
                    adsWatched: 0,
                    adsWatchedToday: 0,
                    earningsToday: 0,
                    gigapubWatchedToday: 0,
                    monetagWatchedToday: 0,
                    onclickWatchedToday: 0,
                    adexiumWatchedToday: 0,
                    referralCount: 0,
                    activeReferrals: 0,
                    referralEarnings: 0,
                    rank: 0,
                    transactions: [],
                    taskHistory: [],
                    referrals: [],
                    lastAdDate: null
                };
                localStorage.setItem(userDataKey, JSON.stringify(currentUserData));
            } else {
                // Load existing user data
                currentUserData = JSON.parse(localStorage.getItem(userDataKey));
                
                // Check if it's a new day to reset daily limits
                const today = new Date().toDateString();
                if (currentUserData.lastAdDate !== today) {
                    currentUserData.adsWatchedToday = 0;
                    currentUserData.earningsToday = 0;
                    currentUserData.gigapubWatchedToday = 0;
                    currentUserData.monetagWatchedToday = 0;
                    currentUserData.onclickWatchedToday = 0;
                    currentUserData.adexiumWatchedToday = 0;
                    currentUserData.lastAdDate = today;
                    localStorage.setItem(userDataKey, JSON.stringify(currentUserData));
                }
            }
            
            // Update UI with user data
            updateUI();
            
            // Load global leaderboard
            loadLeaderboard();
        }
        
        // Save user data to localStorage
        function saveUserData() {
            if (currentUserId && currentUserData) {
                const userDataKey = `userData_${currentUserId}`;
                localStorage.setItem(userDataKey, JSON.stringify(currentUserData));
            }
        }
        
        // Update UI with current user data
        function updateUI() {
            if (!currentUserData) return;
            
            document.getElementById('userBalance').textContent = currentUserData.balance.toFixed(2);
            document.getElementById('userBalanceUSD').textContent = (currentUserData.balance * 0.0095).toFixed(2);
            
            document.getElementById('completedAds').textContent = currentUserData.adsWatched;
            document.getElementById('remainingAds').textContent = 100 - currentUserData.adsWatchedToday;
            
            document.getElementById('todayAds').textContent = currentUserData.adsWatchedToday;
            document.getElementById('todayEarnings').textContent = currentUserData.earningsToday.toFixed(2);
            
            document.getElementById('gigapubCount').textContent = currentUserData.gigapubWatchedToday;
            document.getElementById('monetagCount').textContent = currentUserData.monetagWatchedToday;
            document.getElementById('onclickCount').textContent = currentUserData.onclickWatchedToday;
            document.getElementById('adexiumCount').textContent = currentUserData.adexiumWatchedToday;
            
            document.getElementById('referredCount').textContent = currentUserData.referralCount;
            document.getElementById('activeReferrals').textContent = currentUserData.activeReferrals;
            document.getElementById('referralEarnings').textContent = currentUserData.referralEarnings.toFixed(2);
            
            document.getElementById('userRank').textContent = currentUserData.rank > 0 ? currentUserData.rank : '-';
            
            // Update progress bar
            const progressPercent = (currentUserData.adsWatchedToday / 100) * 100;
            document.getElementById('progressBar').style.width = `${progressPercent}%`;
            
            // Load transactions if they exist
            if (currentUserData.transactions && currentUserData.transactions.length > 0) {
                loadRecentTransactions();
                loadTransactionHistory();
            }
            
            // Load task history if it exists
            if (currentUserData.taskHistory && currentUserData.taskHistory.length > 0) {
                loadTaskHistory();
            }
            
            // Load referrals if they exist
            if (currentUserData.referrals && currentUserData.referrals.length > 0) {
                loadReferrals();
            }
        }
        
        // Initialize Adexium Ads
        function initAdexiumAds() {
            try {
                if (typeof AdexiumWidget !== 'undefined') {
                    adexiumWidget = new AdexiumWidget({
                        wid: '5bc711dc-f3fa-4083-918d-0304c510c77f', 
                        adFormat: 'interstitial'
                    });
                    console.log('Adexium Ads initialized successfully');
                } else {
                    console.warn('Adexium Ads script not loaded properly');
                }
            } catch (error) {
                console.error('Error initializing Adexium Ads:', error);
            }
        }
        
        // Initialize OnClick Ads
        function initOnClickAds() {
            try {
                if (typeof onclicka !== 'undefined') {
                    console.log('OnClick Ads initialized successfully');
                } else {
                    console.warn('OnClick Ads script not loaded properly');
                }
            } catch (error) {
                console.error('Error initializing OnClick Ads:', error);
            }
        }
        
        // Telegram WebApp initialization
        function initTelegram() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                
                // Expand the app to full height
                tg.expand();
                
                // Get user data from Telegram
                const user = tg.initDataUnsafe.user;
                
                if (user) {
                    // Update UI with Telegram user data
                    document.getElementById('userName').textContent = `${user.first_name} ${user.last_name || ''}`;
                    document.getElementById('userUsername').textContent = `@${user.username}`;
                    document.getElementById('userId').textContent = user.id;
                    
                    if (user.photo_url) {
                        document.getElementById('userAvatar').src = user.photo_url;
                    }
                    
                    // Update referral link with user ID
                    document.getElementById('referralLink').textContent = `https://t.me/NxEranBot?start=ref${user.id}`;
                    
                    // Enable haptic feedback
                    tg.isClosingConfirmationEnabled = true;
                    
                    // Initialize user data with Telegram user ID
                    initUserData(user.id.toString());
                }
            } else {
                // Fallback for testing outside Telegram
                document.getElementById('userName').textContent = 'Ratul Hasan';
                document.getElementById('userUsername').textContent = '@ratulhasan';
                document.getElementById('userId').textContent = '7180886616';
                document.getElementById('referralLink').textContent = 'https://t.me/NxEranBot?start=ref7180886616';
                
                // Initialize with a test user ID
                initUserData('7180886616');
            }
            
            // Initialize ad providers
            initAdexiumAds();
            initOnClickAds();
        }
        
        // Send message to admin via bot
        async function sendMessageToAdmin(message) {
            try {
                // In a real implementation, you would send this to your backend
                // which would then use the Telegram Bot API to send the message
                const url = `https://api.telegram.org/bot${BOT_API_KEY}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: ADMIN_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const data = await response.json();
                return data.ok;
            } catch (error) {
                console.error('Error sending message to admin:', error);
                return false;
            }
        }
        
        // Haptic feedback functions
        function impactOccurred(style = 'light') {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.HapticFeedback.impactOccurred(style);
            }
        }
        
        function notificationOccurred(type = 'success') {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.HapticFeedback.notificationOccurred(type);
            }
        }
        
        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                const target = this.getAttribute('data-target');
                showSection(target);
            });
        });
        
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            
            // If leaderboard is selected, refresh it
            if (sectionId === 'leaderboard') {
                loadLeaderboard();
            }
        }
        
        // Modal Functions
        function showAdOptions() {
            document.getElementById('adOptionsModal').style.display = 'flex';
        }
        
        function showWithdrawModal(type) {
            const modal = document.getElementById('withdrawModal');
            const title = document.getElementById('modalTitle');
            const numberLabel = document.getElementById('numberLabel');
            const minAmount = document.getElementById('minAmount');
            
            if (type === 'bkash') {
                title.textContent = 'Withdraw to Bkash';
                numberLabel.textContent = 'Bkash Number';
                minAmount.textContent = 'Minimum withdrawal: à§³20';
            } else if (type === 'rocket') {
                title.textContent = 'Withdraw to Rocket';
                numberLabel.textContent = 'Rocket Number';
                minAmount.textContent = 'Minimum withdrawal: à§³20';
            }
            
            modal.style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('withdrawModal').style.display = 'none';
            document.getElementById('adOptionsModal').style.display = 'none';
        }
        
        function submitWithdraw() {
            const name = document.getElementById('name').value;
            const number = document.getElementById('number').value;
            const email = document.getElementById('email').value;
            const amount = document.getElementById('amount').value;
            const method = document.getElementById('modalTitle').textContent.replace('Withdraw to ', '');
            
            if (!name || !number || !email || !amount) {
                alert('Please fill all fields');
                return;
            }
            
            // Validate minimum amount
            if (parseFloat(amount) < 20) {
                alert('Minimum withdrawal amount is à§³20');
                return;
            }
            
            // Check if user has sufficient balance
            if (parseFloat(amount) > currentUserData.balance) {
                alert('Insufficient balance');
                return;
            }
            
            // Create message for admin
            const userId = document.getElementById('userId').textContent;
            const username = document.getElementById('userUsername').textContent;
            
            const message = `
ðŸ’¸ <b>New Withdrawal Request</b> ðŸ’¸

ðŸ‘¤ <b>User:</b> ${name} (${username})
ðŸ†” <b>User ID:</b> ${userId}
ðŸ“± <b>${method} Number:</b> ${number}
ðŸ“§ <b>Email:</b> ${email}
ðŸ’° <b>Amount:</b> à§³${amount}
ðŸ“Š <b>Payment Method:</b> ${method}

Please process this withdrawal request.
            `;
            
            // Send message to admin
            sendMessageToAdmin(message);
            
            // Add to transactions
            currentUserData.transactions.unshift({
                type: 'withdrawal',
                title: `Withdrawal to ${method}`,
                date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                amount: -parseFloat(amount),
                status: 'processing'
            });
            
            // Update balance
            currentUserData.balance -= parseFloat(amount);
            
            // Save updated data
            saveUserData();
            
            // Update UI
            updateUI();
            
            // Show success notification
            const notification = document.getElementById('notification');
            notification.style.display = 'block';
            notification.textContent = 'Withdrawal request sent to admin successfully!';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
            
            // Provide haptic feedback
            notificationOccurred('success');
            
            closeModal();
        }
        
        // Ad watching function with all four providers integration
        function showAd(provider) {
            const adContainer = document.getElementById('adPlaceholder');
            const gigaBtn = document.getElementById('gigaBtn');
            const monetagBtn = document.getElementById('monetagBtn');
            const onclickBtn = document.getElementById('onclickBtn');
            const adexiumBtn = document.getElementById('adexiumBtn');
            
            // Set current provider
            currentAdProvider = provider;
            
            // Check if user has reached daily limit for this provider
            if (provider === 'gigapub' && currentUserData.gigapubWatchedToday >= 25) {
                alert('You have reached the daily limit of 25 GigaPub ads. Please try another provider or come back tomorrow!');
                return;
            }
            
            if (provider === 'monetag' && currentUserData.monetagWatchedToday >= 25) {
                alert('You have reached the daily limit of 25 Monetag ads. Please try another provider or come back tomorrow!');
                return;
            }
            
            if (provider === 'onclick' && currentUserData.onclickWatchedToday >= 25) {
                alert('You have reached the daily limit of 25 OnClick ads. Please try another provider or come back tomorrow!');
                return;
            }
            
            if (provider === 'adexium' && currentUserData.adexiumWatchedToday >= 25) {
                alert('You have reached the daily limit of 25 Adexium ads. Please try another provider or come back tomorrow!');
                return;
            }
            
            // Check if user has reached overall daily limit
            if (currentUserData.adsWatchedToday >= 100) {
                alert('You have reached the daily limit of 100 ads. Please come back tomorrow!');
                return;
            }
            
            // Show loading state
            adContainer.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div class="waiting-text">Please wait, ad is loading...</div>
                </div>
            `;
            
            // Disable buttons during ad playback
            gigaBtn.disabled = true;
            monetagBtn.disabled = true;
            onclickBtn.disabled = true;
            adexiumBtn.disabled = true;
            
            // Provide haptic feedback
            impactOccurred('medium');
            
            // Simulate ad loading (3 seconds)
            setTimeout(() => {
                if (provider === 'gigapub') {
                    // Use the actual GigaPub ad code
                    window.showGiga()
                        .then(() => {
                            // Ad completed successfully
                            adCompleted();
                        })
                        .catch(e => {
                            // Ad failed or was closed early
                            adFailed();
                        });
                } else if (provider === 'monetag') {
                    // Use Monetag ad code with proper implementation
                    try {
                        // Check if Monetag function exists
                        if (typeof show_9388728 === 'function') {
                            show_9388728()
                                .then(() => {
                                    // Ad completed successfully
                                    adCompleted();
                                })
                                .catch(e => {
                                    // Ad failed or was closed early
                                    adFailed();
                                });
                        } else {
                            // Fallback for testing
                            console.log('Monetag function not found, using simulation');
                            // Simulate successful ad completion after 5 seconds
                            setTimeout(() => {
                                adCompleted();
                            }, 5000);
                        }
                    } catch (error) {
                        console.error('Error with Monetag ad:', error);
                        adFailed();
                    }
                } else if (provider === 'onclick') {
                    // Use OnClick Ads implementation
                    try {
                        // Check if OnClick function exists
                        if (typeof onclicka === 'object' && onclicka.show) {
                            onclicka.show()
                                .then(() => {
                                    // Ad completed successfully
                                    adCompleted();
                                })
                                .catch(e => {
                                    // Ad failed or was closed early
                                    adFailed();
                                });
                        } else {
                            // Fallback for testing
                            console.log('OnClick function not found, using simulation');
                            // Simulate successful ad completion after 5 seconds
                            setTimeout(() => {
                                adCompleted();
                            }, 5000);
                        }
                    } catch (error) {
                        console.error('Error with OnClick ad:', error);
                        adFailed();
                    }
                } else if (provider === 'adexium') {
                    // Use Adexium Ads implementation
                    try {
                        // Check if Adexium function exists
                        if (adexiumWidget && typeof adexiumWidget.showAd === 'function') {
                            adexiumWidget.showAd()
                                .then(() => {
                                    // Ad completed successfully
                                    adCompleted();
                                })
                                .catch(e => {
                                    // Ad failed or was closed early
                                    adFailed();
                                });
                        } else {
                            // Fallback for testing
                            console.log('Adexium function not found, using simulation');
                            // Simulate successful ad completion after 5 seconds
                            setTimeout(() => {
                                adCompleted();
                            }, 5000);
                        }
                    } catch (error) {
                        console.error('Error with Adexium ad:', error);
                        adFailed();
                    }
                }
            }, 3000);
        }
        
        function adCompleted() {
            const adContainer = document.getElementById('adPlaceholder');
            const gigaBtn = document.getElementById('gigaBtn');
            const monetagBtn = document.getElementById('monetagBtn');
            const onclickBtn = document.getElementById('onclickBtn');
            const adexiumBtn = document.getElementById('adexiumBtn');
            
            adContainer.innerHTML = 'Advertisement completed!<br>à§³0.1 has been added to your account.';
            gigaBtn.disabled = false;
            monetagBtn.disabled = false;
            onclickBtn.disabled = false;
            adexiumBtn.disabled = false;
            
            // Update user data
            currentUserData.balance += 0.1;
            currentUserData.adsWatched += 1;
            currentUserData.adsWatchedToday += 1;
            currentUserData.earningsToday += 0.1;
            
            // Update provider-specific count
            if (currentAdProvider === 'gigapub') {
                currentUserData.gigapubWatchedToday += 1;
            } else if (currentAdProvider === 'monetag') {
                currentUserData.monetagWatchedToday += 1;
            } else if (currentAdProvider === 'onclick') {
                currentUserData.onclickWatchedToday += 1;
            } else if (currentAdProvider === 'adexium') {
                currentUserData.adexiumWatchedToday += 1;
            }
            
            // Add to transactions and task history
            const now = new Date();
            const transactionDate = now.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric' });
            const transactionDateLong = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            
            currentUserData.transactions.unshift({
                type: 'ad',
                title: 'Ad Watch Reward',
                date: transactionDate,
                amount: 0.1,
                status: 'completed',
                provider: currentAdProvider
            });
            
            currentUserData.taskHistory.unshift({
                title: 'Ad Watch Reward',
                date: transactionDateLong,
                amount: 0.1,
                status: 'completed',
                provider: currentAdProvider
            });
            
            // Update last ad date
            currentUserData.lastAdDate = new Date().toDateString();
            
            // Save updated data
            saveUserData();
            
            // Update UI
            updateUI();
            
            // Update global leaderboard
            updateLeaderboard();
            
            // Provide haptic feedback
            notificationOccurred('success');
            
            alert('Advertisement completed! à§³0.1 has been added to your account.');
        }
        
        function adFailed() {
            const adContainer = document.getElementById('adPlaceholder');
            const gigaBtn = document.getElementById('gigaBtn');
            const monetagBtn = document.getElementById('monetagBtn');
            const onclickBtn = document.getElementById('onclickBtn');
            const adexiumBtn = document.getElementById('adexiumBtn');
            
            adContainer.innerHTML = 'Ad failed to load or was closed early.<br>Please try again.';
            adContainer.style.color = 'var(--danger)';
            gigaBtn.disabled = false;
            monetagBtn.disabled = false;
            onclickBtn.disabled = false;
            adexiumBtn.disabled = false;
            
            // Provide haptic feedback
            impactOccurred('heavy');
            
            alert('Ad failed to load or was closed early. Please try again.');
        }
        
        // Update global leaderboard
        function updateLeaderboard() {
            // Get all user data keys
            const allKeys = Object.keys(localStorage);
            const userDataKeys = allKeys.filter(key => key.startsWith('userData_'));
            
            // Collect all user data
            const allUsers = [];
            userDataKeys.forEach(key => {
                try {
                    const userData = JSON.parse(localStorage.getItem(key));
                    const userId = key.replace('userData_', '');
                    
                    // Get username from Telegram data or use stored data
                    let username = `user_${userId}`;
                    let firstName = "User";
                    
                    // Try to get Telegram user data if available
                    if (window.Telegram && window.Telegram.WebApp) {
                        const tgUser = window.Telegram.WebApp.initDataUnsafe.user;
                        if (tgUser && tgUser.id.toString() === userId) {
                            username = `@${tgUser.username}`;
                            firstName = tgUser.first_name;
                        }
                    }
                    
                    allUsers.push({
                        id: userId,
                        name: firstName,
                        username: username,
                        amount: userData.balance || 0
                    });
                } catch (e) {
                    console.error('Error parsing user data:', e);
                }
            });
            
            // Sort by balance (descending)
            allUsers.sort((a, b) => b.amount - a.amount);
            
            // Update ranks
            allUsers.forEach((user, index) => {
                user.rank = index + 1;
                
                // Update current user's rank if it's them
                if (user.id === currentUserId) {
                    currentUserData.rank = user.rank;
                    saveUserData();
                    document.getElementById('userRank').textContent = user.rank;
                }
            });
            
            // Save to global leaderboard
            localStorage.setItem('leaderboard', JSON.stringify(allUsers));
            
            return allUsers;
        }
        
        // Load global leaderboard
        function loadLeaderboard() {
            const container = document.getElementById('leaderboardList');
            
            // Get leaderboard data
            let leaderboardData = localStorage.getItem('leaderboard');
            if (!leaderboardData) {
                // Create initial leaderboard if it doesn't exist
                leaderboardData = updateLeaderboard();
            } else {
                leaderboardData = JSON.parse(leaderboardData);
            }
            
            if (leaderboardData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-trophy"></i>
                        <p>No leaderboard data yet</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            // Display top 10 only
            const top10 = leaderboardData.slice(0, 10);
            
            top10.forEach((user, index) => {
                const rank = index + 1;
                const leaderboardEl = document.createElement('div');
                leaderboardEl.className = 'leaderboard-item';
                
                leaderboardEl.innerHTML = `
                    <div class="rank ${rank <= 3 ? 'rank-' + rank : ''}">${rank}</div>
                    <div class="leaderboard-user">
                        <h3>${user.name}</h3>
                        <p>${user.username}</p>
                    </div>
                    <div class="leaderboard-amount">à§³ ${user.amount.toFixed(2)}</div>
                `;
                
                container.appendChild(leaderboardEl);
            });
        }
        
        // Load recent transactions
        function loadRecentTransactions() {
            const container = document.getElementById('recentTransactions');
            
            if (currentUserData.transactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-receipt"></i>
                        <p>No transactions yet</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            const recentTransactions = currentUserData.transactions.slice(0, 2);
            
            recentTransactions.forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = 'transaction-item';
                
                transactionEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${transaction.title}</div>
                        <div class="transaction-date">${transaction.date}${transaction.status !== 'completed' ? ' Â· ' + transaction.status : ''}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount < 0 ? 'withdrawal' : ''}">${transaction.amount > 0 ? '+' : ''}à§³ ${transaction.amount.toFixed(2)}</div>
                `;
                
                container.appendChild(transactionEl);
            });
        }
        
        // Load transaction history
        function loadTransactionHistory() {
            const container = document.getElementById('transactionHistory');
            
            if (currentUserData.transactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-receipt"></i>
                        <p>No transaction history yet</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            currentUserData.transactions.forEach(transaction => {
                const transactionEl = document.createElement('div');
                transactionEl.className = 'transaction-item';
                
                transactionEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${transaction.title}</div>
                        <div class="transaction-date">${transaction.date}${transaction.status !== 'completed' ? ' Â· ' + transaction.status : ''}</div>
                    </div>
                    <div class="transaction-amount ${transaction.amount < 0 ? 'withdrawal' : ''}">${transaction.amount > 0 ? '+' : ''}à§³ ${transaction.amount.toFixed(2)}</div>
                `;
                
                container.appendChild(transactionEl);
            });
        }
        
        // Load task history
        function loadTaskHistory() {
            const container = document.getElementById('taskHistory');
            
            if (currentUserData.taskHistory.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-tasks"></i>
                        <p>No task history yet</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            currentUserData.taskHistory.forEach(task => {
                const taskEl = document.createElement('div');
                taskEl.className = 'transaction-item';
                
                taskEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${task.title}</div>
                        <div class="transaction-date">${task.date} Â· ${task.status}</div>
                    </div>
                    <div class="transaction-amount">+à§³ ${task.amount.toFixed(2)}</div>
                `;
                
                container.appendChild(taskEl);
            });
        }
        
        // Load referrals
        function loadReferrals() {
            const container = document.getElementById('referralsList');
            
            if (currentUserData.referrals.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <p>No referrals yet</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            currentUserData.referrals.forEach(referral => {
                const referralEl = document.createElement('div');
                referralEl.className = 'transaction-item';
                
                referralEl.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-title">${referral.name}</div>
                        <div class="transaction-date">Joined: ${referral.joinDate}</div>
                    </div>
                    <div class="transaction-amount">à§³ ${referral.earnings.toFixed(2)}</div>
                `;
                
                container.appendChild(referralEl);
            });
        }
        
        function copyReferralLink() {
            const referralLink = document.getElementById('referralLink').textContent;
            navigator.clipboard.writeText(referralLink).then(() => {
                const notification = document.getElementById('notification');
                notification.style.display = 'block';
                notification.textContent = 'Referral link copied to clipboard!';
                notification.style.background = 'var(--primary)';
                
                // Provide haptic feedback
                impactOccurred('light');
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            });
        }
        
        // Close modal if clicked outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading screen initially
            setTimeout(function() {
                document.getElementById('loading-screen').style.opacity = '0';
                setTimeout(function() {
                    document.getElementById('loading-screen').style.display = 'none';
                    document.querySelector('.container').style.opacity = '1';
                    initTelegram();
                }, 500);
            }, 1500);
        });
    </script>
</body>
</html>
